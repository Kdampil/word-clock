<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ffffff">
    <title>World Clock - Time Zones</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #f5f5f7;
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
            user-select: none;
        }

        header {
            width: 100%;
            text-align: center;
            padding: 10px;
            background: #0079bf;
            color: white;
            font-size: 1.5rem;
            font-weight: 600;
            cursor: grab;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 100;
        }

        header span {
            flex-grow: 1;
            text-align: center;
            pointer-events: none;
        }

        .pin-btn, .minimize-btn {
            cursor: pointer;
            font-size: 1.5rem;
            padding: 5px 10px;
        }

        .pin-btn.pinned {
            color: yellow;
        }

        .minimize-btn {
            color: white;
        }

        .controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .add-btn,
        .gear-btn {
            background: var(--primary-color, #0079bf);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.5rem;
            line-height: 40px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease, background 0.3s ease;
        }

        .add-btn:hover,
        .gear-btn:hover {
            transform: scale(1.1);
        }

        .time-zone-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: center;
            margin-top: 60px;
        }

        .time-zone {
            background: white;
            border-radius: 10px;
            padding: 15px;
            width: 300px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            position: relative;
        }

        .time-zone:hover {
            transform: scale(1.02);
        }

        .time-zone h2 {
            font-size: 1.2rem;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--block-title-color, #42526e);
        }

        .time-zone p {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--time-text-color, #42526e);
        }

        .delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: #b3bac5;
            font-size: 1.2rem;
            line-height: 1;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .time-zone:hover .delete-btn {
            opacity: 1;
        }

        .delete-btn:hover {
            color: #ff4d4d;
        }

        /* Minimal Mode */
        .minimal header {
            background: transparent !important;
            color: transparent !important;
        }

        .minimal .controls, 
        .minimal .time-zone h2, 
        .minimal .delete-btn {
            display: none;
        }

        .minimal .time-zone {
            box-shadow: none;
            background: transparent;
        }

        .minimal .time-zone p {
            font-size: 2rem;
            font-weight: 700;
            color: white;
        }
    </style>
</head>
<body>
    <header data-drag>
        <div class="pin-btn">üìç</div>
        <span>World Clock</span>
        <div class="minimize-btn">üóï</div>
    </header>

    <div class="controls">
        <button class="add-btn" id="add-btn">+</button>
        <button class="gear-btn" id="gear-btn">‚öôÔ∏è</button>
    </div>

    <main>
        <div class="time-zone-container" id="time-zone-container">
            <div class="time-zone">
                <h2>Local Time</h2>
                <p class="time">--:--:--</p>
                <button class="delete-btn">&times;</button>
            </div>
        </div>
    </main>

    <script>
        const { ipcRenderer } = require('electron');

        const pinBtn = document.querySelector('.pin-btn');
        const minimizeBtn = document.querySelector('.minimize-btn');
        const body = document.body;
        let isPinned = false;
        let isMinimal = false;

        // Toggle Always on Top
        pinBtn.addEventListener('click', () => {
            isPinned = !isPinned;
            ipcRenderer.send('set-always-on-top', isPinned);
            pinBtn.textContent = isPinned ? 'üìå' : 'üìç';
            pinBtn.classList.toggle('pinned', isPinned);
        });

        // Toggle Minimal Mode
        minimizeBtn.addEventListener('click', () => {
            isMinimal = !isMinimal;
            body.classList.toggle('minimal', isMinimal);
        });

        // Update time for all time zones
        function updateTime() {
            document.querySelectorAll('.time-zone').forEach(tzDiv => {
                const timeElement = tzDiv.querySelector('.time');
                const now = new Date();
                timeElement.textContent = now.toLocaleTimeString();
            });
        }

        setInterval(updateTime, 1000);
        updateTime();
    </script>
</body>
</html>
